<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="popup.css">
</head>
<body>
    <!-- Main View -->
    <div class="main-view" id="mainView">
        <div class="header">
            <img src="images/icon-128.png" class="app-icon" alt="AutoPiP">
            <div class="header-info">
                <div class="app-name">AutoPiP</div>
                <div class="version" id="version"></div>
            </div>
        </div>

        <div class="site-control">
            <div class="site-row">
                <span class="site-hostname" id="currentHostname">Loading...</span>
                <button class="site-action-btn" id="siteActionBtn">Block</button>
            </div>

            <!-- Mode Switcher -->
            <div class="mode-switcher" role="group" aria-label="List mode">
                <button class="mode-btn active" id="blacklistModeBtn" data-mode="blacklist">Blacklist</button>
                <button class="mode-btn" id="whitelistModeBtn" data-mode="whitelist">Whitelist</button>
            </div>

            <!-- Blacklist Section -->
            <div id="blacklistSection">
                <div class="list-header-row">
                    <button class="blacklist-header" id="blacklistHeader" aria-expanded="false" aria-controls="blacklistList">
                        <span class="chevron" id="chevron" aria-hidden="true">‚ñ∫</span>
                        <span class="blacklist-title">Blacklisted Sites (<span id="blacklistCount">0</span>)</span>
                    </button>
                    <button class="clear-list-btn" id="clearBlacklistBtn" title="Clear all blacklisted sites" aria-label="Clear all blacklisted sites">üóë</button>
                </div>
                <div class="blacklist-list" id="blacklistList">
                    <!-- Dynamically populated -->
                </div>
            </div>

            <!-- Whitelist Section -->
            <div id="whitelistSection" class="hidden">
                <div class="list-header-row">
                    <button class="blacklist-header" id="whitelistHeader" aria-expanded="false" aria-controls="whitelistList">
                        <span class="chevron" id="whitelistChevron" aria-hidden="true">‚ñ∫</span>
                        <span class="blacklist-title whitelist-title">Whitelisted Sites (<span id="whitelistCount">0</span>)</span>
                    </button>
                    <button class="clear-list-btn" id="clearWhitelistBtn" title="Clear all whitelisted sites" aria-label="Clear all whitelisted sites">üóë</button>
                </div>
                <div class="blacklist-list" id="whitelistList">
                    <!-- Dynamically populated -->
                </div>
            </div>
        </div>

        <div class="settings-container">
            <div class="setting">
                <label for="tabSwitchCheckbox">PiP on Tab Switch</label>
                <input type="checkbox" class="checkbox" id="tabSwitchCheckbox" checked aria-label="Enable Picture-in-Picture when switching tabs">
            </div>
            <div class="setting">
                <label for="windowSwitchCheckbox">PiP on Window Switch</label>
                <input type="checkbox" class="checkbox" id="windowSwitchCheckbox" checked aria-label="Enable Picture-in-Picture when switching windows">
            </div>
            <div class="setting">
                <label for="scrollSwitchCheckbox">PiP on Scroll (YouTube)</label>
                <input type="checkbox" class="checkbox" id="scrollSwitchCheckbox" checked aria-label="Enable Picture-in-Picture when scrolling on YouTube">
            </div>
        </div>

        <hr>

        <div class="links">
            <a href="https://github.com/vordenken/AutoPiP" target="_blank" class="link-container" title="View Source">
                <img src="images/icons8-github-64.png" class="link-icon github-icon" alt="GitHub">
                <span class="link-label">Source</span>
            </a>
            
            <a href="https://ko-fi.com/vordenken" target="_blank" class="link-container" title="Support on Ko-fi">
                <img src="images/icons8-kofi-64.png" class="link-icon" alt="Ko-fi">
                <span class="link-label">Ko-fi</span>
            </a>
            
            <a href="https://www.buymeacoffee.com/vordenken" target="_blank" class="link-container" title="Buy Me a Coffee">
                <img src="images/icons8-bmc-64.png" class="link-icon" alt="Buy Me a Coffee">
                <span class="link-label">Coffee</span>
            </a>
            
            <button class="link-container" id="settingsButton" title="Settings">
                <span class="settings-icon">‚öô</span>
                <span class="link-label">Settings</span>
            </button>
        </div>
    </div>

    <!-- Settings View -->
    <div class="settings-view hidden" id="settingsView" role="dialog" aria-labelledby="settingsTitle">
        <button class="back-button" id="backButton" title="Back" aria-label="Back to main view">
            <span class="back-arrow" aria-hidden="true">‚Üê</span>
        </button>
        
        <div class="settings-header">
            <img src="images/icon-128.png" class="app-icon" alt="AutoPiP">
            <div class="header-info">
                <div class="app-name">AutoPiP</div>
                <div class="settings-subtitle" id="settingsTitle">Settings</div>
            </div>
        </div>

        <div class="settings-content">
            <div class="setting">
                <label for="debugLoggingCheckbox">Debug Logging</label>
                <input type="checkbox" class="checkbox" id="debugLoggingCheckbox" aria-label="Enable debug logging in console">
            </div>
            <div class="setting">
                <label for="hostnameToggle">Use full hostname (including subdomain)</label>
                <input type="checkbox" class="checkbox" id="hostnameToggle" checked aria-label="Use full hostname including subdomain for blacklist">
            </div>
        </div>
    </div>

    <!-- Inline Confirm Dialog (window.confirm is blocked in Safari extension popups) -->
    <div class="confirm-overlay hidden" id="confirmOverlay" role="dialog" aria-modal="true" aria-labelledby="confirmMessage">
        <div class="confirm-box">
            <p class="confirm-message" id="confirmMessage"></p>
            <div class="confirm-buttons">
                <button class="confirm-btn confirm-cancel" id="confirmCancel">Cancel</button>
                <button class="confirm-btn confirm-ok" id="confirmOk">Clear</button>
            </div>
        </div>
    </div>

    <script src="popup.js"></script>
</body>
</html>
